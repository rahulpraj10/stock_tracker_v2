{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2>Filter Data</h2>
    <form action="/" method="GET" class="filter-form">
        <div class="form-group">
            <label for="sc_code">SC CODE</label>
            <input type="text" id="sc_code" name="sc_code" placeholder="e.g. 500123" value="{{ sc_code }}">
        </div>
        <div class="form-group">
            <label for="sc_name">SC NAME</label>
            <input type="text" id="sc_name" name="sc_name" placeholder="e.g. RELIANCE" value="{{ sc_name }}">
        </div>
        <div class="form-group">
            <label for="sc_group">SC GROUP</label>
            <input type="text" id="sc_group" name="sc_group" placeholder="e.g. A, B, XT" value="{{ sc_group }}">
        </div>
        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" value="{{ date }}">
        </div>
        <div class="form-group actions">
            <button type="submit" class="btn btn-primary">Filter</button>
            <a href="/" class="btn btn-outline">Clear</a>
        </div>
    </form>
</div>

{% if data %}
<div class="table-container">
    <table>
        <thead>
            <tr>
                {% for col in columns %}
                <th>{{ col }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                {% for col in columns %}
                <td>{{ row[col] }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="pagination">
    {% if page > 1 %}
    <a href="{{ url_for('index', page=page-1, sc_code=sc_code, sc_name=sc_name, sc_group=sc_group, date=date) }}"
        class="btn btn-outline">Previous</a>
    {% else %}
    <button class="btn btn-outline" disabled>Previous</button>
    {% endif %}

    <span>Page {{ page }} of {{ total_pages }} <span style="color: var(--text-secondary); margin-left: 4px;">({{
            total_records }} records)</span></span>

    {% if page < total_pages %} <a
        href="{{ url_for('index', page=page+1, sc_code=sc_code, sc_name=sc_name, sc_group=sc_group, date=date) }}"
        class="btn btn-outline">Next</a>
        {% else %}
        <button class="btn btn-outline" disabled>Next</button>
        {% endif %}
</div>
{% else %}
<div class="empty-state">
    <p>No data found matching your criteria.</p>
</div>
{% endif %}
{% endblock %}